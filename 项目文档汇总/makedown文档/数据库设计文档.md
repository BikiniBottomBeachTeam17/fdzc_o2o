# 数据库设计说明书

## 修订历史

| 版本号 | 修改类型 | 修改时间         | 修改人员 | 内容简述                         |
| ------ | -------- | ---------------- | -------- | -------------------------------- |
| V1     | 新增     | 2022-04-23 21:05 | 陈明灿   | 引言<br />外部设计<br />结构设计 |

## 1、引言

数据库之前，都必须设计好数据库，包括将要存储的数据的类型，数据之间的相互关系，数据的约束形式。数据库设计的好坏是一-个关键 。在进行项目开发时，数据库的设计相当于整个系统的基建工程，同时为了后续的数据库维护工作提供了良好的使用说明，也可以作为未来版本升级时的重要参考资料。数据库设计的目标是建立一个合适的数据模型。这个数据模型应当是满足用户要求，既能合理地组织用户需要的所有数据，又能支持用户对数据的的所有处理功能。并且要具有较高的范式,数据完整性好，效益高，便于理解和维护，没有数据冲突。同时为了更好的便于开发，我们同样需要在构建数据库设计说明书时对字段添加说明供给开发人员更好的观看

### 1.1、编写目的

​		在进行项目开发使用数据库之前，都必须设计好数据库，包括将要存储的数据的类型，数据之间的相互关系，数据的约束形式。数据库设计的好坏是一-个关键 。在进行项目开发时，数据库的设计相当于整个系统的基建工程，同时为了后续的数据库维护工作提供了良好的使用说明，也可以作为未来版本升级时的重要参考资料。数据库设计的目标是建立一个合适的数据模型。这个数据模型应当是满足用户要求，既能合理地组织用户需要的所有数据，又能支持用户对数据的的所有处理功能。并且要具有较高的范式,数据完整性好，效益高，便于理解和维护，没有数据冲突。同时为了更好的便于开发，我们同样需要在构建数据库设计说明书时对字段添加说明供给开发人员更好的观看

## 2、外部设计

### 2.1、标识符与状态

数据库名称：fdzc_o2o

用户名：root

密码：root

权限：全部

有效时间：开发阶段

说明：系统正式发布后，可能更改数据库用户/密码，请在统一位置编写数据库连接字符串，在发行时请予以更改。

### 2.2、使用它的程序

本系统主要采用uniapp及vue.js作为前端的应用开发工具，使用springboot及MyBatisPlus作为接口开发框架工具，使用MySQL 作为后台的数据.库，Linux 或Windows均可作为系统平台。

### 2.3、约定

1. 所有命名一定要具有描述性，杜绝一切拼音、或拼音英文混杂的命名方式。
2. 字符集采用UTF-8，请注意字符的转换。
3. 所有数据表第一个字段都是系统内部使用主键列，由后端编写生成uuid进行填充，不可空，该字段名称为: id,要确保不把此字段暴露给最终用户。

## 3、结构设计

### 3.1、物理结构设计

在利用MySQL创建一个新的数据表以前，应当根据逻辑模型和数据字典先分析和设计数据表，描述出数据库中基本表的设计。需要确定数据表名称,所包含字段名称，数据类型，宽度以及建立的主键、外键等描述表的属性的内容。本项目全部20个数据表，包括如下：管理员表、角色表、菜单表、角色菜单表、业务字典表、业务字典内容表、用户表、地址表、商家表、产品类型表、产品表、订单表、轮播图表、广告表、论坛表、评论表、点赞表、闲置物品表、组织表、电话簿表

#### 3.1.1、系统管理

表名：admin

说明：管理员表

数据列：

| 序号 | 名称               | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明           |
| ---- | ------------------ | -------- | ---- | ------ | ------ | ---- | ------ | -------------- |
| 1    | admin_id           | varchar  | 10   |        |        | √    |        | 管理员唯一标识 |
| 2    | admin_account      | varchar  | 15   |        |        |      |        | 管理员账号     |
| 3    | admin_password     | varchar  | 20   |        |        |      |        | 管理员密码     |
| 4    | admin_name         | varchar  | 10   |        |        |      |        | 管理员用户名   |
| 5    | admin_portrait     | varchar  |      |        | √      |      |        | 管理员头像     |
| 6    | admin_gender       | int      | 5    | 0      | √      |      |        | 管理员性别     |
| 7    | admin_email        | varchar  | 25   |        | √      |      |        | 管理员邮箱     |
| 8    | admin_phone        | varchar  | 11   |        | √      |      |        | 管理员手机号   |
| 9    | admin_permissions  | varchar  | 10   |        |        |      |        | 管理员权限     |
| 10   | admin_enableStatus | int      | 5    | 0      |        |      |        | 管理员启用状态 |
| 11   | admin_deleteStatus | int      | 5    | 0      |        |      |        | 管理员删除状态 |

表名：role

说明：角色表

数据列：

| 序号 | 名称              | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | ----------------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | role_id           | varchar  | 10   |        |        | √    |        | 角色唯一标识 |
| 2    | role_name         | varchar  | 15   |        |        |      |        | 角色名称     |
| 3    | role_deleteStatus | int      | 5    | 0      |        |      |        | 角色删除状态 |

表名：menu

说明：菜单表

数据列：

| 序号 | 名称          | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | ------------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | menu_id       | varchar  | 10   |        |        | √    |        | 菜单唯一标识 |
| 2    | menu_name     | varchar  | 15   |        |        |      |        | 菜单名称     |
| 3    | menu_parent   | varchar  | 10   |        | √      |      |        | 父菜单id     |
| 4    | menu_priority | int      | 5    | 0      |        |      |        | 菜单优先级   |
| 5    | menu_link     | varchar  |      |        |        |      |        | 链接地址     |

表名：role_menu

说明：权限分配表

数据列：

| 序号 | 名称    | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | ------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | role_id | varchar  | 10   |        |        |      |        | 角色唯一标识 |
| 2    | menu_id | varchar  | 10   |        |        |      |        | 菜单唯一标识 |

表名：dictionary

说明：业务字典

数据列：

| 序号 | 名称            | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明             |
| ---- | --------------- | -------- | ---- | ------ | ------ | ---- | ------ | ---------------- |
| 1    | dictionary_id   | varchar  | 10   |        |        | √    |        | 业务字典唯一标识 |
| 2    | dictionary_name | varchar  | 15   |        |        |      |        | 业务字典名称     |

表名：dictionaryContent

说明：业务字典内容

数据列：

| 序号 | 名称                    | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明                 |
| ---- | ----------------------- | -------- | ---- | ------ | ------ | ---- | ------ | -------------------- |
| 1    | dictionaryContent_id    | varchar  | 10   |        |        | √    |        | 业务字典内容唯一标识 |
| 2    | dictionaryContent_text  | varchar  | 15   |        |        |      |        | 业务字典内容文本     |
| 3    | dictionaryContent_value | int      | 5    | 0      |        |      |        | 业务字典内容值       |
| 4    | dictionary_id           | varchar  | 10   |        |        |      |        | 业务字典唯一标识     |

#### 3.1.2、用户管理

表名：user

说明：用户表

数据列：

| 序号 | 名称            | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明             |
| ---- | --------------- | -------- | ---- | ------ | ------ | ---- | ------ | ---------------- |
| 1    | user_id         | varchar  | 10   |        |        | √    |        | 用户唯一标识     |
| 2    | user_account    | varchar  | 15   |        |        |      |        | 用户账号         |
| 3    | user_password   | varchar  | 20   |        |        |      |        | 用户密码         |
| 4    | user_name       | varchar  | 10   |        |        |      |        | 用户名           |
| 5    | user_portrait   | varchar  |      |        |        |      |        | 用户头像         |
| 6    | user_gender     | int      | 5    | 0      | √      |      |        | 用户性别         |
| 7    | user_email      | varchar  | 25   |        | √      |      |        | 用户邮箱         |
| 8    | user_phone      | varchar  | 11   |        | √      |      |        | 用户手机号       |
| 9    | user_stuID      | varchar  | 10   |        | √      |      |        | 学号绑定         |
| 10   | user_wxID       | varchar  | 30   |        | √      |      |        | 绑定微信         |
| 11   | user_isStudent  | int      | 5    | 0      |        |      |        | 学生认证是否通过 |
| 12   | user_isMerchant | int      | 5    | 0      |        |      |        | 是否为商家       |
| 13   | user_isPartTime | int      | 5    | 0      |        |      |        | 是否为兼职       |
| 14   | user_balance    | double   | 9    | 2      |        |      | 0      | 用户余额         |
| 15   | user_status     | int      | 5    | 0      |        |      |        | 用户状态         |

表名：address

说明：地址表

数据列：

| 序号 | 名称            | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | --------------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | address_id      | varchar  | 10   |        |        | √    |        | 地址ID       |
| 2    | address_details | varchar  |      |        |        |      |        | 地址名称     |
| 3    | address_linkman | varchar  | 10   |        |        |      |        | 联系人       |
| 4    | address_phone   | varchar  | 11   |        |        |      |        | 联系电话     |
| 5    | address_gender  | int      | 5    | 0      |        |      |        | 联系人性别   |
| 6    | user_id         | varchar  | 10   |        |        |      |        | 用户唯一标识 |

#### 3.1.3、商家管理

表名：merchant

说明：商家表

数据列：

| 序号 | 名称                  | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明               |
| ---- | --------------------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------------ |
| 1    | merchant_id           | varchar  | 10   |        |        | √    |        | 商家唯一标识       |
| 2    | merchant_name         | varchar  | 50   |        |        |      |        | 商家名称           |
| 3    | merchant_type         | int      | 5    | 0      |        |      |        | 商铺类型           |
| 4    | merchant_portrait     | varchar  |      |        |        |      |        | 商家图标           |
| 5    | merchant_address      | varchar  |      |        |        |      |        | 商家地址           |
| 6    | merchant_notice       | varchar  |      |        | √      |      |        | 商家公告           |
| 7    | merchant_createTime   | datetime |      |        |        |      |        | 商家入驻时间       |
| 8    | merchant_enbleStatus  | int      | 5    | 0      |        |      |        | 商家启用状态       |
| 9    | merchant_deleteStatus | int      | 5    | 0      |        |      |        | 商家删除状态       |
| 10   | user_id               | varchar  | 10   |        |        |      |        | 商铺负责人(用户id) |

表名：goodsClassify

说明：产品类型表

数据列：

| 序号 | 名称               | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明             |
| ---- | ------------------ | -------- | ---- | ------ | ------ | ---- | ------ | ---------------- |
| 1    | goodsClassify_id   | varchar  | 10   |        |        | √    |        | 产品类型唯一标识 |
| 2    | goodsClassify_name | varchar  | 10   |        |        |      |        | 类型名称         |
| 3    | merchant_id        | varchar  | 10   |        |        |      |        | 商家id           |

表名：goods

说明：产品表

数据列：

| 序号 | 名称             | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | ---------------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | goods_id         | varchar  | 10   |        |        | √    |        | 产品唯一标识 |
| 2    | goods_name       | varchar  | 50   |        |        |      |        | 产品名称     |
| 3    | goods_portrait   | varchar  |      |        |        |      |        | 产品图片     |
| 4    | goods_price      | double   | 9    | 2      |        |      |        | 产品价格     |
| 5    | goods_abstract   | varchar  |      |        |        |      |        | 产品简介     |
| 6    | goods_status     | int      | 5    | 0      |        |      |        | 产品状态     |
| 7    | goods_inventory  | int      | 9    | 0      |        |      |        | 产品库存     |
| 8    | merchant_id      | varchar  | 10   |        |        |      |        | 商家id       |
| 9    | goodsClassify_id | varchar  | 10   |        |        |      |        | 产品类型id   |

表名：order

说明：订单表

数据列：

| 序号 | 名称               | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | ------------------ | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | order_id           | varchar  | 20   |        |        | √    |        | 订单唯一标识 |
| 2    | order_number       | varchar  | 20   |        |        |      |        | 订单编号     |
| 3    | order_type         | int      | 5    | 0      |        |      |        | 订单类型     |
| 4    | order_goods        | varchar  |      |        |        |      |        | 订单商品     |
| 5    | order_status       | int      | 5    | 0      |        |      |        | 订单状态     |
| 6    | order_price        | double   | 9    | 2      |        |      |        | 订单金额     |
| 7    | order_createTime   | datetime |      |        |        |      |        | 订单创建时间 |
| 8    | order_successTime  | datetime |      |        |        |      |        | 订单完成时间 |
| 9    | order_deleteStatus |          |      |        |        |      |        | 订单删除状态 |
| 10   | address_id         | varchar  | 10   |        |        |      |        | 地址唯一标识 |
| 11   | merchant_id        | varchar  | 10   |        | √      |      |        | 商家id       |
| 12   | user_id            | varchar  | 10   |        | √      |      |        | 兼职跑腿员id |
|      |                    |          |      |        |        |      |        |              |
|      |                    |          |      |        |        |      |        |              |

表名：

说明：

数据列：

| 序号 | 名称 | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明 |
| ---- | ---- | -------- | ---- | ------ | ------ | ---- | ------ | ---- |
|      |      |          |      |        |        |      |        |      |



#### 3.1.4、推送管理

表名：slide

说明：轮播图表

数据列：

| 序号 | 名称             | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明           |
| ---- | ---------------- | -------- | ---- | ------ | ------ | ---- | ------ | -------------- |
| 1    | slide_id         | varchar  | 10   |        |        | √    |        | 轮播图id       |
| 2    | slide_picture    | varchar  |      |        |        |      |        | 轮播图图片     |
| 3    | slide_link       | varchar  |      |        |        |      |        | 链接地址       |
| 4    | slide_note       | varchar  |      |        |        |      |        | 轮播图备注     |
| 5    | slide_createTime | datetime |      |        |        |      |        | 轮播图创建时间 |
| 6    | slide_priority   | int      | 5    | 0      |        |      |        | 轮播图优先级   |
| 7    | slide_status     | int      | 5    | 0      |        |      |        | 轮播图状态     |
| 8    | slide_module     | int      | 5    | 0      |        |      |        | 轮播图所属模块 |
|      |                  |          |      |        |        |      |        |                |

表名：advertising

说明：广告表

数据列：

| 序号 | 名称                   | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明         |
| ---- | ---------------------- | -------- | ---- | ------ | ------ | ---- | ------ | ------------ |
| 1    | advertising_id         | varchar  | 10   |        |        | √    |        | 广告id       |
| 2    | advertising_source     | varchar  | 50   |        |        |      |        | 广告来源     |
| 3    | advertising_title      | varchar  | 50   |        |        |      |        | 广告标题     |
| 4    | advertising_link       | varchar  |      |        |        |      |        | 广告链接     |
| 5    | advertising_picture    | varchar  |      |        |        |      |        | 广告图片     |
| 6    | advertising_createTime | datetime |      |        |        |      |        | 广告创建时间 |
| 7    | advertising_expireTime | datetime |      |        |        |      |        | 广告到期时间 |
| 8    | advertising_status     | int      | 5    | 0      |        |      |        | 广告状态     |
|      |                        |          |      |        |        |      |        |              |

表名：

说明：

数据列：

| 序号 | 名称 | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明 |
| ---- | ---- | -------- | ---- | ------ | ------ | ---- | ------ | ---- |
|      |      |          |      |        |        |      |        |      |

#### 3.1.5、论坛管理

表名：forum

说明：论坛表

数据列：

| 序号 | 名称              | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明           |
| ---- | ----------------- | -------- | ---- | ------ | ------ | ---- | ------ | -------------- |
| 1    | forum_id          | varchar  | 10   |        |        | √    |        | 帖子id         |
| 2    | forum_contentJson | varchar  |      |        |        |      |        | 帖子数据内容   |
| 3    | forum_createTime  | datetime |      |        |        |      |        | 帖子创建时间   |
| 4    | forum_classify    | int      | 5    |        |        |      |        | 帖子分类       |
| 5    | user_id           | varchar  | 10   |        |        |      |        | 发布人(用户id) |
|      |                   |          |      |        |        |      |        |                |

表名：comments

说明：评论表

数据列：

| 序号 | 名称                 | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明             |
| ---- | -------------------- | -------- | ---- | ------ | ------ | ---- | ------ | ---------------- |
| 1    | comments_id          | varchar  | 10   |        |        | √    |        | 评论id           |
| 2    | comments_contentJson | varchar  |      |        |        |      |        | 评论内容         |
| 3    | comments_createTime  | datetime |      |        |        |      |        | 评论时间         |
| 4    | user_id              | varchar  | 10   |        |        |      |        | 评论人(用户id)   |
| 5    | forum_id             | varchar  | 10   |        |        |      |        | 回复帖子(帖子id) |
|      |                      |          |      |        |        |      |        |                  |

表名：like

说明：点赞表

数据列：

| 序号 | 名称     | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明       |
| ---- | -------- | -------- | ---- | ------ | ------ | ---- | ------ | ---------- |
| 1    | like_id  | varchar  | 10   |        |        | √    |        | 点赞id     |
| 2    | forum_id | varchar  | 10   |        |        |      |        | 帖子id     |
| 3    | user_id  | varchar  | 10   |        |        |      |        | 点赞用户id |

表名：

说明：

数据列：

| 序号 | 名称 | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明 |
| ---- | ---- | -------- | ---- | ------ | ------ | ---- | ------ | ---- |
|      |      |          |      |        |        |      |        |      |

#### 3.1.6、二手市场管理

表名：idle

说明：闲置物品表

数据列：

| 序号 | 名称             | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明             |
| ---- | ---------------- | -------- | ---- | ------ | ------ | ---- | ------ | ---------------- |
| 1    | idle_id          | varchar  | 10   |        |        | √    |        | 闲置物品id       |
| 2    | idle_title       | varchar  | 20   |        |        |      |        | 闲置物品标题     |
| 3    | idle_contentJson | varchar  |      |        |        |      |        | 闲置物品json数据 |
| 4    | idle_price       | double   | 9    | 2      |        |      |        | 闲置物品价格     |
| 5    | idle_status      | int      | 5    | 0      |        |      |        | 闲置物品交易状态 |
| 6    | user_id          | varchar  | 10   |        |        |      |        | 发布人(用户id)   |

表名：

说明：

数据列：

| 序号 | 名称 | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明 |
| ---- | ---- | -------- | ---- | ------ | ------ | ---- | ------ | ---- |
|      |      |          |      |        |        |      |        |      |

#### 3.1.7、校园服务

表名：organization

说明：组织表

数据列：

| 序号 | 名称                     | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明     |
| ---- | ------------------------ | -------- | ---- | ------ | ------ | ---- | ------ | -------- |
| 1    | organization_id          | varchar  | 10   |        |        | √    |        | 组织id   |
| 2    | organization_name        | varchar  | 20   |        |        |      |        | 组织名称 |
| 3    | organization_logo        | varchar  |      |        |        |      |        | 组织Logo |
| 4    | organization_contentJson | varchar  |      |        |        |      |        | 组织风采 |
| 5    | organization_quantity    | int      | 10   |        |        |      |        | 组织人数 |
| 6    | organization_type        | int      | 5    |        |        |      |        | 组织类型 |

表名：phoneBook

说明：电话簿表

数据列：

| 序号 | 名称            | 数据类型 | 长度 | 小数位 | 允许空 | 主键 | 默认值 | 说明       |
| ---- | --------------- | -------- | ---- | ------ | ------ | ---- | ------ | ---------- |
| 1    | phoneBook_id    | varchar  | 10   |        |        | √    |        | 电话簿id   |
| 2    | phoneBook_name  | varchar  | 20   |        |        |      |        | 电话簿名称 |
| 3    | phoneBook_phone | varchar  | 11   |        |        |      |        | 电话簿号码 |
| 4    | phoneBook_type  | int      | 5    |        |        |      |        | 电话簿类型 |
|      |                 |          |      |        |        |      |        |            |

### 3.2 E-R图

#### 3.2.1 总图

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501005008351-1792645566.jpg)

#### 3.2.2 管理员、权限分配模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501005555481-201629688.png)

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501005842006-1956700388.png)

#### 3.2.3 业务字典模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501005209671-966637126.png)



#### 3.2.4 用户及地址模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501011835202-1611194628.png)

#### 3.2.5 商家模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501012648646-109538581.jpg)

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501013332050-131057363.jpg)

#### 3.2.6 帖子模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501011256002-420045047.png)

#### 3.2.7 推送模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501013428720-537878194.png)

#### 3.2.8 二手市场模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501013525714-1972308583.png)

#### 3.2.9 校内服务模块

![](https://img2022.cnblogs.com/blog/2836780/202205/2836780-20220501013127693-950411852.png)



